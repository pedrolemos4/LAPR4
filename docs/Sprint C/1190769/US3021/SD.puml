@startuml
'http://plantuml.com/skinparam.html
skinparam handwritten true
skinparam monochrome true
skinparam packageStyle rect
skinparam defaultFontName FG Virgil
skinparam shadowing false

participant ConsultarTarefasUI as UI <<presentation>>
control ConsultarTarefasController as CTRL <<application>>
participant PersistenceContext as Persistence <<persistence>>
participant RepositoryFactory as Factory <<factory>>
database ServicoRepository as SRepository <<repository>>
database ColaboradorRepository as CRepository <<repository>>

activate UI

UI -> UI : doShow()

UI -> CTRL: listServicos()
    activate CTRL
      CTRL -> UI: listaServicos
    deactivate CTRL

UI -> CTRL: getUser()
    activate CTRL
    CTRL -> CRepository: getUser()
      activate CRepository
      deactivate CRepository
      CTRL -> UI: colab
    deactivate CTRL
    
loop
UI -> CTRL: getFluxo()
    activate CTRL
    CTRL -> SRepository: getFluxo(servico)
      activate SRepository
      deactivate SRepository
      CTRL -> UI: fluxo
    deactivate CTRL
    
UI -> CTRL: tarefasPendentes(fluxo, colab)
    activate CTRL
      CTRL -> SRepository: tarefasPendentes(fluxo, colab)
      activate SRepository
      deactivate SRepository
      CTRL -> UI: listaTarefas
    deactivate CTRL
end
deactivate UI
@enduml
